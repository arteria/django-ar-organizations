[tox]
envlist =
    py27-django17,
    py27-django18,
    lint,
    coverage

[testenv]
setenv =
    PYTHONPATH = {toxinidir}:{toxinidir}/tests
commands = ./runtests.sh

[testenv:py27-django17]
basepython = python2.7
deps =
    Django>=1.7,<1.8
    -r{toxinidir}/requirements-test.txt
    -r{toxinidir}/requirements.txt

[testenv:py27-django18]
basepython = python2.7
deps =
    Django>=1.8,<1.9
    -r{toxinidir}/requirements-test.txt
    -r{toxinidir}/requirements.txt

[testenv:lint]
basepython=python2.7
deps=pylint
commands=pylint organizations

[testenv:coverage]
basepython=python2.7
deps =
    Django>=1.8,<1.9
    -r{toxinidir}/requirements-test.txt
    -r{toxinidir}/requirements.txt
    coverage
commands=
  coverage erase  # delete excisting coverage reports
  coverage run example/manage.py test organizations
  coverage report
